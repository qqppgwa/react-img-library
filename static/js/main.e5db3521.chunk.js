(this["webpackJsonpreact-img-library"]=this["webpackJsonpreact-img-library"]||[]).push([[0],{125:function(t,e,a){t.exports={container:"ImageCell_container__1_5Sa",placeHolderShimmer2:"ImageCell_placeHolderShimmer2__34nAW",liked:"ImageCell_liked__22-r5"}},127:function(t,e,a){t.exports={more:"index_more__3uzQM",dis:"index_dis__yX8wo"}},202:function(t,e,a){t.exports=a(433)},408:function(t,e,a){},409:function(t,e,a){},433:function(t,e,a){"use strict";a.r(e);var i=a(1),s=a.n(i),n=a(96),r=a.n(n),o=(a(207),a(216),a(408),a(409),a(99)),l=a(47),c=a(53),u=a(54),h=a(56),d=a(55),p=a(57),k=a(25),m=a.n(k),f=a(125),g=a.n(f),y=a(63),v=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(h.a)(this,Object(d.a)(e).call(this))).state={islike:a.checkLike(t.list.id)},a}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return s.a.createElement("figure",{className:g.a.container,onClick:this.liked.bind(this)},s.a.createElement("img",{src:this.props.list.images.fixed_height_downsampled.url,alt:this.props.keyword+" ".concat(this.props.index+1)||"favourite ".concat(this.props.index+1)}),s.a.createElement("div",{className:this.state.islike?g.a.liked:""}))}},{key:"liked",value:function(){var t=this,e=new Date;e.setDate(Date.now()+12096e5);var a=m.a.load("likeList")?m.a.load("likeList"):[];if(this.state.islike&&0!==a.length){if(this.state.islike){var i=a.indexOf(a.find((function(e){return e===t.props.list.id})));a.splice(i,1),this.setState({islike:!1})}}else a.push(this.props.list.id),this.setState({islike:!0});m.a.save("likeList",a,{path:"/",expires:e}),this.props.addLike(a.length)}},{key:"checkLike",value:function(t){if(m.a.load("likeList"))return!!m.a.load("likeList").find((function(e){return e===t}))}}]),e}(s.a.Component),b=Object(y.b)(null,(function(t){return{addLike:function(e){return t({type:"ADD_Like",payload:{likeNum:e}})}}}))(v),E=a(199),w="IGLOYrMAV8KRjzGzj6vvF3dGx2WlASHZ",_=a.n(E).a.create({baseURL:"https://api.giphy.com/v1"}),O=function(t){return _.get("/gifs/search?api_key=".concat(w,"&q=").concat(t.query,"&limit=").concat(t.limit,"&offset=").concat(t.offset))},S=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(h.a)(this,Object(d.a)(e).call(this))).state={status:"",list:[]},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t,e=this;m.a.load("likeList")&&m.a.load("likeList").length>0?(this.setState({status:"loading"}),(t={ids:m.a.load("likeList").join()},_.get("/gifs?api_key=".concat(w,"&ids=").concat(t.ids))).then((function(t){var a=t.data.data;a.length>0?e.setState({status:"showList",list:a}):e.setState({status:"none"})})).catch((function(t){e.setState({status:"error"})}))):this.setState({status:"none"})}},{key:"render",value:function(){var t,e=[];if("showList"===this.state.status)for(var a=0;a<this.state.list.length;a++)e.push(s.a.createElement(b,{list:this.state.list[a],key:a,index:a})),t=e;else t="loading"===this.state.status?s.a.createElement("p",null,"Loading"):0===this.state.list.length?s.a.createElement("p",null,"No favourite image"):s.a.createElement("p",null,"error");return s.a.createElement("div",{className:"imgList"},t)}}]),e}(s.a.Component),j=a(200),L=a.n(j),D=a(127),x=a.n(D),N=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(h.a)(this,Object(d.a)(e).call(this))).state={keyword:"",status:"",list:[],btnDisabled:!1},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t;if("loading"===this.state.status)t=s.a.createElement("p",null,"loading");else if(this.state.list.length>0){t=[];for(var e=0;e<this.state.list.length;e++)t.push(s.a.createElement(b,{list:this.state.list[e],key:e,index:e,keyword:this.state.keyword}))}else t="none"===this.state.status?s.a.createElement("p",null,"no result"):s.a.createElement("p",null,"error");return s.a.createElement("div",null,s.a.createElement(q,{keying:this.keying.bind(this),changeStatus:this.changeStatus.bind(this),list:this.list.bind(this),state:this.state,query:L.a.parse(this.props.location.search)}),s.a.createElement("div",{className:"imgList"},""===this.state.status?null:t),this.state.pagination&&this.state.pagination.total_count-(this.state.pagination.offset+8)>0&&"showlist"===this.state.status?s.a.createElement("button",{className:x.a.more+(this.state.btnDisabled?" ".concat(x.a.dis):""),onClick:this.nextPage.bind(this),disabled:this.state.btnDisabled},"load more"):null)}},{key:"keying",value:function(t){this.setState({keyword:t})}},{key:"changeStatus",value:function(t){"loading"===t?this.setState({list:[]}):this.props.history.push("?keyword=".concat(this.state.keyword)),this.setState({status:t})}},{key:"list",value:function(t){this.setState({list:this.state.list.concat(t.data),pagination:t.pagination})}},{key:"nextPage",value:function(){var t=this;this.setState({btnDisabled:!0}),O({query:this.state.keyword,limit:"8",offset:this.state.pagination.offset+8}).then((function(e){t.list(e.data),t.setState({btnDisabled:!1})})).catch((function(e){console.log(e),t.setState({btnDisabled:!1}),alert("error")}))}}]),e}(s.a.Component),q=function(t){function e(){return Object(c.a)(this,e),Object(h.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return s.a.createElement("input",{type:"text",placeholder:"Start searching for images!",onChange:this.keying.bind(this),onKeyPress:this.search.bind(this),value:this.props.state.keyword})}},{key:"componentDidMount",value:function(){this.props.query.keyword&&(this.keying(this.props.query.keyword),this.search(this.props.query.keyword))}},{key:"keying",value:function(t){t===this.props.query.keyword?this.props.keying(t):this.props.keying(t.target.value.trim())}},{key:"search",value:function(t){var e=this;(this.props.state.keyword.length>0&&t.nativeEvent&&13===t.nativeEvent.keyCode||t===this.props.query.keyword)&&(this.props.changeStatus("loading"),O({query:this.props.state.keyword||this.props.query.keyword,limit:"8",offset:"0"}).then((function(t){t.data.data.length>0?e.props.changeStatus("showlist"):e.props.changeStatus("none"),e.props.list(t.data)})).catch((function(t){console.log(t),e.props.changeStatus("error")})))}}]),e}(s.a.Component),C=N,I=Object(y.b)((function(t){return{likeNum:t.likeNum}}),null)((function(t){return s.a.createElement(o.a,null,s.a.createElement("nav",null,s.a.createElement("h1",null,s.a.createElement("a",{href:"/react-img-library/#"},"Galler",s.a.createElement("span",null,"easy"))),s.a.createElement(o.b,{exact:!0,to:"/"},"search"),s.a.createElement(o.b,{exact:!0,to:"/favourites"},"favourites (",s.a.createElement("span",null,t.likeNum),")")),s.a.createElement(l.c,null,s.a.createElement(l.a,{path:"/favourites",component:S}),s.a.createElement(l.a,{path:"/",component:C})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(98),X={likeNum:m.a.load("likeList")?m.a.load("likeList").length:0},G=Object(A.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,e=arguments.length>1?arguments[1]:void 0,a=e.type,i=e.payload;switch(a){case"ADD_Like":return{likeNum:i.likeNum};default:return t}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(s.a.createElement(y.a,{store:G},s.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[202,1,2]]]);
//# sourceMappingURL=main.e5db3521.chunk.js.map