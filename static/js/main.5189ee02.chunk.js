(this["webpackJsonpreact-img-library"]=this["webpackJsonpreact-img-library"]||[]).push([[0],{125:function(t,e,a){t.exports={container:"ImageCell_container__1_5Sa",placeHolderShimmer2:"ImageCell_placeHolderShimmer2__34nAW",liked:"ImageCell_liked__22-r5"}},127:function(t,e,a){t.exports={more:"index_more__3uzQM",dis:"index_dis__yX8wo"}},201:function(t,e,a){t.exports=a(431)},407:function(t,e,a){},408:function(t,e,a){},431:function(t,e,a){"use strict";a.r(e);var i=a(1),n=a.n(i),s=a(96),l=a.n(s),o=(a(206),a(215),a(407),a(408),a(99)),r=a(47),c=a(53),u=a(54),h=a(56),d=a(55),p=a(57),m=a(25),f=a.n(m),k=a(125),g=a.n(k),b=a(63),v=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(h.a)(this,Object(d.a)(e).call(this))).state={islike:a.checkLike(t.list.id)},a}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return n.a.createElement("figure",{className:g.a.container,onClick:this.liked.bind(this)},n.a.createElement("img",{src:this.props.list.images.fixed_height_downsampled.url,alt:this.props.keyword+" ".concat(this.props.index+1)||"favourite ".concat(this.props.index+1)}),n.a.createElement("div",{className:this.state.islike?g.a.liked:""}))}},{key:"liked",value:function(){var t=this,e=new Date;e.setDate(Date.now()+12096e5);var a=f.a.load("likeList")?f.a.load("likeList"):[];if(this.state.islike&&0!==a.length){if(this.state.islike){var i=a.indexOf(a.find((function(e){return e===t.props.list.id})));a.splice(i,1),this.setState({islike:!1})}}else a.push(this.props.list.id),this.setState({islike:!0});f.a.save("likeList",a,{path:"/",expires:e}),this.props.addLike(a.length)}},{key:"checkLike",value:function(t){if(f.a.load("likeList"))return!!f.a.load("likeList").find((function(e){return e===t}))}}]),e}(n.a.Component),y=Object(b.b)(null,(function(t){return{addLike:function(e){return t({type:"ADD_Like",payload:{likeNum:e}})}}}))(v),E=a(199),_="IGLOYrMAV8KRjzGzj6vvF3dGx2WlASHZ",O=a.n(E).a.create({baseURL:"https://api.giphy.com/v1"}),S=function(t){return O.get("/gifs/search?api_key=".concat(_,"&q=").concat(t.query,"&limit=").concat(t.limit,"&offset=").concat(t.offset))},w=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(h.a)(this,Object(d.a)(e).call(this))).state={status:"",list:[]},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t,e=this;f.a.load("likeList")&&f.a.load("likeList").length>0?(this.setState({status:"loading"}),(t={ids:f.a.load("likeList").join()},O.get("/gifs?api_key=".concat(_,"&ids=").concat(t.ids))).then((function(t){var a=t.data.data;a.length>0?e.setState({status:"showList",list:a}):e.setState({status:"none"})})).catch((function(t){e.setState({status:"error"})}))):this.setState({status:"none"})}},{key:"render",value:function(){var t,e=[];if("showList"===this.state.status)for(var a=0;a<this.state.list.length;a++)e.push(n.a.createElement(y,{list:this.state.list[a],key:a,index:a})),t=e;else t="loading"===this.state.status?n.a.createElement("p",null,"Loading"):0===this.state.list.length?n.a.createElement("p",null,"No favourite image"):n.a.createElement("p",null,"error");return n.a.createElement("div",{className:"imgList"},t)}}]),e}(n.a.Component),j=a(127),L=a.n(j),x=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(h.a)(this,Object(d.a)(e).call(this))).state={keyword:"",status:"",list:[],btnDisabled:!1},t}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t;if("loading"===this.state.status)t=n.a.createElement("p",null,"loading");else if(this.state.list.length>0){t=[];for(var e=0;e<this.state.list.length;e++)t.push(n.a.createElement(y,{list:this.state.list[e],key:e,index:e,keyword:this.state.keyword}))}else t="none"===this.state.status?n.a.createElement("p",null,"no result"):n.a.createElement("p",null,"error");return n.a.createElement("div",null,n.a.createElement(D,{keying:this.keying.bind(this),changeStatus:this.changeStatus.bind(this),list:this.list.bind(this),state:this.state}),n.a.createElement("div",{className:"imgList"},""===this.state.status?null:t),this.state.pagination&&this.state.pagination.total_count-(this.state.pagination.offset+8)>0&&"showlist"===this.state.status?n.a.createElement("button",{className:L.a.more+(this.state.btnDisabled?" ".concat(L.a.dis):""),onClick:this.nextPage.bind(this),disabled:this.state.btnDisabled},"load more"):null)}},{key:"keying",value:function(t){this.setState({keyword:t})}},{key:"changeStatus",value:function(t){"loading"===t&&this.setState({list:[]}),this.setState({status:t})}},{key:"list",value:function(t){this.setState({list:this.state.list.concat(t.data),pagination:t.pagination})}},{key:"nextPage",value:function(){var t=this;this.setState({btnDisabled:!0}),S({query:this.state.keyword,limit:"8",offset:this.state.pagination.offset+8}).then((function(e){t.list(e.data),t.setState({btnDisabled:!1})})).catch((function(e){console.log(e),t.setState({btnDisabled:!1}),alert("error")}))}}]),e}(n.a.Component),D=function(t){function e(){return Object(c.a)(this,e),Object(h.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(p.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return n.a.createElement("input",{type:"text",placeholder:"Start searching for images!",onChange:this.keying.bind(this),onKeyPress:this.search.bind(this),value:this.props.state.keyword})}},{key:"keying",value:function(t){this.props.keying(t.target.value)}},{key:"search",value:function(t){var e=this;13===t.nativeEvent.keyCode&&(this.props.changeStatus("loading"),S({query:this.props.state.keyword,limit:"8",offset:"0"}).then((function(t){t.data.data.length>0?e.props.changeStatus("showlist"):e.props.changeStatus("none"),e.props.list(t.data)})).catch((function(t){console.log(t),e.props.changeStatus("error")})))}}]),e}(n.a.Component),N=x,C=Object(b.b)((function(t){return{likeNum:t.likeNum}}),null)((function(t){return n.a.createElement(o.a,null,n.a.createElement("nav",null,n.a.createElement("h1",null,"Galler",n.a.createElement("span",null,"easy")),n.a.createElement(o.b,{exact:!0,to:"/"},"search"),n.a.createElement(o.b,{exact:!0,to:"/favourites"},"favourites (",n.a.createElement("span",null,t.likeNum),")")),n.a.createElement(r.c,null,n.a.createElement(r.a,{path:"/favourites",component:w}),n.a.createElement(r.a,{path:"/",component:N})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(98),A={likeNum:f.a.load("likeList")?f.a.load("likeList").length:0},X=Object(I.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0,a=e.type,i=e.payload;switch(a){case"ADD_Like":return{likeNum:i.likeNum};default:return t}}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(n.a.createElement(b.a,{store:X},n.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[201,1,2]]]);
//# sourceMappingURL=main.5189ee02.chunk.js.map